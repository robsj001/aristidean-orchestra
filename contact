<?php

require_once 'mailer/PHPMailerAutoload.php';

$mail = new PHPMailer(); // Created a new PHPMailer Object to work with

$mail->IsSMTP(); // enabled SMTP

$mail->SMTPDebug = 1; // Setting debugging mode: 1 = errors and messages, 2 = messages only

$mail->SMTPAuth = true; // authentication enabled

/**
 * It could be that you needed $mail->SMTPSecure = 'ssl';
 * Also make sure you don't have two step verification switched on for that
 * account as that can cause problems also.
 *
 * You could try changing $mail->SMTP to:
 * $mail->SMTPSecure = 'tls';
 *
 * It's worth noting that some SMTP servers block connections.
 * Some SMTP servers don't support SSL (or TLS) connections.
 *
 * Also worth noting that if you have two factor authentication enabled,
 * you'll need to setup an application specific password to use in place
 * of your email account's password.
 *
 * You can generate an application specific password by following these instructions:
 * https://support.google.com/accounts/answer/185833
 *
 * Then set $mail->Password to your application specific password.
 */
$mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for G-Mail

// Setting up G-Mail host and port
$mail->Host = "smtp.gmail.com";
$mail->Port = 465; // or 587

// Enabled HTML for Mail Body
$mail->IsHTML(true);

// G-Mail account credentials for SMTP authentication
$mail->Username = "email@gmail.com";
$mail->Password = "password";

/* Composing E-Mail */
$mail->SetFrom("sender@gmail.com", "Sender Name"); // Sender's E-Mail and Name
$mail->Subject = "Test Mail";
$mail->Body = "<h1>Hello, World!</h1>";

// Alternate Message
$mail->AltBody = "To view the message, please use an HTML compatible email viewer!";

// Adding any attachment for the E-Mail
$mail->AddAttachment("example.jpg");

$mail->AddAddress("recipient@gmail.com", "Recipient Name");

/******************************/

// Sending E-Mail
if ( ! $mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
}
else {
  echo "Message has been sent";
}

?>
